<!DOCTYPE html>
<html>
<head>
    <title>My Electron App</title>
    <style>
        /* General Styling */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        /* Loading and Progress Bar Styling */
        #loading {
            display: none;
            font-size: 18px;
            color: #888;
            margin: 10px 0;
        }
        #progress {
            width: 80%;
            height: 15px;
            background-color: #ddd;
            border-radius: 25px;
            margin: 15px auto;
            overflow: hidden;
            box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.1);
        }
        #progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4caf50, #6fcf97);
            border-radius: 25px;
            transition: width 0.3s ease;
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.2);
        }
        /* Output Container Styling */
        #output-container {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .output-column {
            width: 30%;
            padding: 15px;
            background-color: #f7f7f7;
            border-radius: 8px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            overflow-wrap: break-word;
            transition: background-color 0.3s, color 0.3s;
        }
        /* Button Styling */
        #runButton, #darkModeButton {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            color: #fff;
            background-color: #4caf50;
            border-radius: 5px;
            cursor: pointer;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.15);
            margin: 5px;
            transition: background-color 0.3s ease;
        }
        #runButton:hover, #darkModeButton:hover {
            background-color: #45a049;
        }
        /* Dark Mode Styling */
        body.dark {
            background-color: #1e1e1e;
            color: #f0f0f0; 
        }
        .dark .output-column {
            background-color: #333;
            color: #f0f0f0;
        }
        .dark #progress {
            background-color: #555;
        }
        .dark #runButton, .dark #darkModeButton {
            background-color: #6fcf97;
            color: #000;
        }
    </style>
</head>
<body>
    <h1>Computer Networks</h1>
    <button id="runButton">Run Process</button>
    <button id="darkModeButton">Dark Mode</button>
    <div id="loading">Loading... Please wait.</div>
    <div id="progress">
        <div id="progress-bar"></div>
    </div>
    <div id="output-container">
        <div id="column1" class="output-column"></div>
        <div id="column2" class="output-column"></div>
        <div id="column3" class="output-column"></div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');

        const runButton = document.getElementById('runButton');
        const darkModeButton = document.getElementById('darkModeButton');
        const loading = document.getElementById('loading');
        const progressBar = document.getElementById('progress-bar');
        const column1 = document.getElementById('column1');
        const column2 = document.getElementById('column2');
        const column3 = document.getElementById('column3');

        // Function to handle background task and display output
        runButton.addEventListener('click', () => {
            loading.style.display = 'block';
            progressBar.style.width = '0%';
            column1.innerHTML = '';
            column2.innerHTML = '';
            column3.innerHTML = '';

            ipcRenderer.send('run-background-task');

            ipcRenderer.on('progress', (event, progress) => {
                progressBar.style.width = progress + '%';
            });

            ipcRenderer.on('task-completed', (event, result) => {
                loading.style.display = 'none';

                // Split each section by newline and join with <br> for line breaks
                column1.innerHTML = result[0] ? result[0].split('\n').join('<br>') : 'No data';
                column2.innerHTML = result[1] ? result[1].split('\n').join('<br>') : 'No data';
                column3.innerHTML = result[2] ? result[2].split('\n').join('<br>') : 'No data';
            });
        });

        // Dark Mode Toggle
        darkModeButton.addEventListener('click', () => {
            document.body.classList.toggle('dark');
        });
    </script>
</body>
</html>
